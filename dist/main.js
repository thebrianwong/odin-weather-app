(()=>{"use strict";const e=async e=>{const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=a0c9839361f301aa4ff8bb089dde2d79`);return 200===t.status?await t.json():Promise.reject(t)},t=async()=>{const e=Math.floor(508061*Math.random())-1,t=await fetch(`https://wft-geo-db.p.rapidapi.com/v1/geo/cities?limit=1&includeDeleted=NONE&offset=${e}`,{method:"GET",headers:{"X-RapidAPI-Key":"807ea18ec2msh3a2175b27cf041dp170feajsnf745f5536e94","X-RapidAPI-Host":"wft-geo-db.p.rapidapi.com"}});return 200===t.status?await t.json():Promise.reject(t)},r=(()=>{const e=e=>e.main.temp;return{getTemperatureFahrenheit:t=>{const r=9*(e(t)-273.15)/5+32;return Math.round(100*r)/100},getTemperatureCelsius:t=>{const r=e(t)-273.15;return Math.round(100*r)/100},getWeatherMain:e=>e.weather[0].main,getWeatherDescription:e=>e.weather[0].description,getWeatherIconCode:e=>e.weather[0].icon,getCityName:e=>e.name,getRandomCityName:e=>e.data[0].city}})(),o=(()=>{const e=()=>{Array.from(document.querySelectorAll(".submission-element")).forEach((e=>{!1===e.disabled?e.disabled=!0:e.disabled=!1}))},t=()=>{document.querySelector("#loading-indicator").classList.toggle("not-displayed")};return{updateDisplayedWeather:e=>{(e=>{const t=r.getWeatherIconCode(e);document.querySelector(".weather-icon").src=`http://openweathermap.org/img/wn/${t}.png`})(e),(e=>{const t=r.getWeatherMain(e);document.querySelector(".weather-main").textContent=t})(e),(e=>{const t=r.getWeatherDescription(e);document.querySelector(".weather-description").textContent=t})(e),(e=>{const t=r.getTemperatureFahrenheit(e);document.querySelector(".temp-f").textContent=`${t}째F`})(e),(e=>{const t=r.getTemperatureCelsius(e);document.querySelector(".temp-c").textContent=`${t}째C`})(e),(e=>{const t=r.getCityName(e);document.querySelector(".city-name").textContent=t})(e),document.querySelector("#city").value=""},addPlaceholderValues:()=>{const e=document.querySelector(".weather-icon"),t=document.querySelector(".weather-main"),r=document.querySelector(".weather-description"),o=document.querySelector(".temp-f"),n=document.querySelector(".temp-c"),a=document.querySelector(".city-name");e.src="../dist/mickey.png",t.textContent="The sun might or might not be visible",r.textContent="hopefully the sky is still blue",o.textContent="Larger number째F",n.textContent="Smaller number째C",a.textContent="Disneyland"},changeErrorMessage:e=>{document.querySelector(".error-message").textContent=e},toggleSubmissionElementsEnabled:e,toggleLoadingIndicator:t,toggleLoadingInProgress:()=>{e(),t()}}})(),n=(()=>{const n=async()=>{const t=document.querySelector("#city").value;if(""!==t)try{const r=await e(t);o.updateDisplayedWeather(r)}catch(e){404===e.status?o.changeErrorMessage("Uh oh, looks like something went wrong! Check your spelling or try a different city!"):429===e.status?o.changeErrorMessage("Whoa, slow down there partner! Save some weather data for the rest of us!"):500===e.status&&o.changeErrorMessage("Something out of our control is broken. Try again later!"),console.error(Error(e.statusText))}o.toggleLoadingInProgress()},a=async()=>{let n,s;try{const a=await t();n=r.getRandomCityName(a),s=await e(n),o.updateDisplayedWeather(s),o.toggleLoadingInProgress()}catch(e){404===e.status&&void 0===n?o.changeErrorMessage("Hmm, it seems like we're running into some trouble. Try again!"):404===e.status&&void 0===s||429===e.status?setTimeout(a,1500):500===e.status&&o.changeErrorMessage("Something out of our control is broken. Try again later!"),console.error(Error(`${e.status} ${e.statusText}`))}};return{addUserInputListener:()=>{const e=document.querySelector(".search-button"),t=document.querySelector("#city"),r=document.querySelector(".random-button");e.addEventListener("click",(()=>{o.toggleLoadingInProgress(),n()})),t.addEventListener("keydown",(e=>{"Enter"===e.key&&(o.toggleLoadingInProgress(),n())})),r.addEventListener("click",(()=>{o.toggleLoadingInProgress(),a()}))}}})();!async function(){try{const t=await e("Hell");o.updateDisplayedWeather(t)}catch(e){o.addPlaceholderValues(),console.error(Error(`${e.status} ${e.statusText}. If you can see this, that means there was an issue with the OpenWeatherMap API!`))}}(),n.addUserInputListener()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGFBQXNDZ0YsSUFBcEJGLEdBQ1IsTUFBakJOLEVBQU14RSxPQUdOaUYsV0FBV0wsRUFBbUIsTUFDSixNQUFqQkosRUFBTXhFLFFBQ2Y2QixFQUFnQnFDLG1CQUNkLDREQUdKTyxRQUFRRCxNQUFNRSxNQUFNLEdBQUdGLEVBQU14RSxVQUFVd0UsRUFBTUcsY0FDL0MsR0F3QkYsTUFBTyxDQUFFTyxxQkF0Qm9CLEtBQzNCLE1BQU1DLEVBQWVsRCxTQUFTTSxjQUFjLGtCQUN0QzZDLEVBQW1CbkQsU0FBU00sY0FBYyxTQUMxQzhDLEVBQWVwRCxTQUFTTSxjQUFjLGtCQUM1QzRDLEVBQWFHLGlCQUFpQixTQUFTLEtBR3JDekQsRUFBZ0J1QywwQkFBMkJFLEdBQWlCLElBRTlEYyxFQUFpQkUsaUJBQWlCLFdBQVlDLElBQzFCLFVBQWRBLEVBQU1DLE1BR1IzRCxFQUFnQnVDLDBCQUEyQkUsSUFDN0MsSUFFRmUsRUFBYUMsaUJBQWlCLFNBQVMsS0FHckN6RCxFQUFnQnVDLDBCQUEyQlEsR0FBbUIsR0FDOUQsRUFHTCxFQXBGaUIsSUNtQmxCLGlCQUNFLElBQ0UsTUFBTTlFLFFBQWlCSCxFQUEwQixRQUNqRGtDLEVBQWdCYSx1QkFBdUI1QyxFQVF6QyxDQVBFLE1BQU8wRSxHQUNQM0MsRUFBZ0I4Qix1QkFDaEJjLFFBQVFELE1BQ05FLE1BQ0UsR0FBR0YsRUFBTXhFLFVBQVV3RSxFQUFNRywrRkFHL0IsQ0FDRCxDQVpELEdBYUFOLEVBQVVhLHNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi13ZWF0aGVyLWFwcC8uL3NyYy9BUElfcmVxdWVzdF9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vb2Rpbi13ZWF0aGVyLWFwcC8uL3NyYy9maWx0ZXJfZGF0YV9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vb2Rpbi13ZWF0aGVyLWFwcC8uL3NyYy9ET01fbWFuaXB1bGF0aW9uX21vZHVsZS5qcyIsIndlYnBhY2s6Ly9vZGluLXdlYXRoZXItYXBwLy4vc3JjL3VzZXJfaW5wdXRfbW9kdWxlLmpzIiwid2VicGFjazovL29kaW4td2VhdGhlci1hcHAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgQVBJUmVxdWVzdCA9ICgoKSA9PiB7XG4gIGNvbnN0IEFQSUtFWSA9IFwiYTBjOTgzOTM2MWYzMDFhYTRmZjhiYjA4OWRkZTJkNzlcIjtcbiAgY29uc3QgZ2V0Q2l0eVdlYXRoZXIgPSBhc3luYyAoY2l0eSkgPT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L3dlYXRoZXI/cT0ke2NpdHl9JmFwcGlkPSR7QVBJS0VZfWBcbiAgICApO1xuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgY29uc3QgcGFyc2VkT2JqZWN0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIHBhcnNlZE9iamVjdDtcbiAgICB9XG4gICAgLy8gbmV0d29yayBlcnJvciwgY2hhbmdlIERPTSB0byBoYXZlIGVycm9yIG1lc3NhZ2VcbiAgICAvLyBhY3R1YWxseSB0aGlzIG1pZ2h0IG1ha2UgbW9yZSBzZW5zZSB0byBnbyBpbiB1c2VySW5wdXQoKVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZSk7XG4gIH07XG4gIGNvbnN0IGdldFJhbmRvbUNpdHkgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgQ0lUWUNPVU5UID0gNTA4MDYxO1xuICAgIGNvbnN0IHJhbmRvbUNpdHlJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIENJVFlDT1VOVCkgLSAxO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiWC1SYXBpZEFQSS1LZXlcIjogXCI4MDdlYTE4ZWMybXNoM2EyMTc1YjI3Y2YwNDFkcDE3MGZlYWpzbmY3NDVmNTUzNmU5NFwiLFxuICAgICAgICBcIlgtUmFwaWRBUEktSG9zdFwiOiBcIndmdC1nZW8tZGIucC5yYXBpZGFwaS5jb21cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgYGh0dHBzOi8vd2Z0LWdlby1kYi5wLnJhcGlkYXBpLmNvbS92MS9nZW8vY2l0aWVzP2xpbWl0PTEmaW5jbHVkZURlbGV0ZWQ9Tk9ORSZvZmZzZXQ9JHtyYW5kb21DaXR5SW5kZXh9YCxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgY29uc3QgcGFyc2VkT2JqZWN0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIHBhcnNlZE9iamVjdDtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlKTtcbiAgfTtcbiAgcmV0dXJuIHsgZ2V0Q2l0eVdlYXRoZXIsIGdldFJhbmRvbUNpdHkgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IEFQSVJlcXVlc3QgfTtcbiIsImNvbnN0IGZpbHRlckRhdGEgPSAoKCkgPT4ge1xuICBjb25zdCBnZXRUZW1wZXJhdHVyZSA9IChkYXRhKSA9PiBkYXRhLm1haW4udGVtcDtcbiAgY29uc3QgZ2V0VGVtcGVyYXR1cmVGYWhyZW5oZWl0ID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCBrZWx2aW4gPSBnZXRUZW1wZXJhdHVyZShkYXRhKTtcbiAgICBjb25zdCBmYWhyZW5oZWl0ID0gKChrZWx2aW4gLSAyNzMuMTUpICogOSkgLyA1ICsgMzI7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoZmFocmVuaGVpdCAqIDEwMCkgLyAxMDA7XG4gIH07XG4gIGNvbnN0IGdldFRlbXBlcmF0dXJlQ2Vsc2l1cyA9IChkYXRhKSA9PiB7XG4gICAgY29uc3Qga2VsdmluID0gZ2V0VGVtcGVyYXR1cmUoZGF0YSk7XG4gICAgY29uc3QgY2Vsc2l1cyA9IGtlbHZpbiAtIDI3My4xNTtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChjZWxzaXVzICogMTAwKSAvIDEwMDtcbiAgfTtcbiAgY29uc3QgZ2V0V2VhdGhlck1haW4gPSAoZGF0YSkgPT4gZGF0YS53ZWF0aGVyWzBdLm1haW47XG4gIGNvbnN0IGdldFdlYXRoZXJEZXNjcmlwdGlvbiA9IChkYXRhKSA9PiBkYXRhLndlYXRoZXJbMF0uZGVzY3JpcHRpb247XG4gIGNvbnN0IGdldFdlYXRoZXJJY29uQ29kZSA9IChkYXRhKSA9PiBkYXRhLndlYXRoZXJbMF0uaWNvbjtcbiAgY29uc3QgZ2V0Q2l0eU5hbWUgPSAoZGF0YSkgPT4gZGF0YS5uYW1lO1xuICBjb25zdCBnZXRSYW5kb21DaXR5TmFtZSA9IChkYXRhKSA9PiBkYXRhLmRhdGFbMF0uY2l0eTtcbiAgcmV0dXJuIHtcbiAgICBnZXRUZW1wZXJhdHVyZUZhaHJlbmhlaXQsXG4gICAgZ2V0VGVtcGVyYXR1cmVDZWxzaXVzLFxuICAgIGdldFdlYXRoZXJNYWluLFxuICAgIGdldFdlYXRoZXJEZXNjcmlwdGlvbixcbiAgICBnZXRXZWF0aGVySWNvbkNvZGUsXG4gICAgZ2V0Q2l0eU5hbWUsXG4gICAgZ2V0UmFuZG9tQ2l0eU5hbWUsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyBmaWx0ZXJEYXRhIH07XG4iLCJpbXBvcnQgeyBmaWx0ZXJEYXRhIH0gZnJvbSBcIi4vZmlsdGVyX2RhdGFfbW9kdWxlXCI7XG5cbmNvbnN0IERPTU1hbmlwdWxhdGlvbiA9ICgoKSA9PiB7XG4gIGNvbnN0IGFkZFdlYXRoZXJJY29uID0gKHdlYXRoZXJEYXRhKSA9PiB7XG4gICAgY29uc3Qgd2VhdGhlckljb24gPSBmaWx0ZXJEYXRhLmdldFdlYXRoZXJJY29uQ29kZSh3ZWF0aGVyRGF0YSk7XG4gICAgY29uc3Qgd2VhdGhlckljb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53ZWF0aGVyLWljb25cIik7XG4gICAgd2VhdGhlckljb25FbGVtZW50LnNyYyA9IGBodHRwOi8vb3BlbndlYXRoZXJtYXAub3JnL2ltZy93bi8ke3dlYXRoZXJJY29ufS5wbmdgO1xuICB9O1xuICBjb25zdCBhZGRXZWF0aGVyTWFpbiA9ICh3ZWF0aGVyRGF0YSkgPT4ge1xuICAgIGNvbnN0IHdlYXRoZXJNYWluID0gZmlsdGVyRGF0YS5nZXRXZWF0aGVyTWFpbih3ZWF0aGVyRGF0YSk7XG4gICAgY29uc3Qgd2VhdGhlck1haW5FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53ZWF0aGVyLW1haW5cIik7XG4gICAgd2VhdGhlck1haW5FbGVtZW50LnRleHRDb250ZW50ID0gd2VhdGhlck1haW47XG4gIH07XG4gIGNvbnN0IGFkZFdlYXRoZXJEZXNjcmlwdGlvbiA9ICh3ZWF0aGVyRGF0YSkgPT4ge1xuICAgIGNvbnN0IHdlYXRoZXJEZXNjcmlwdGlvbiA9IGZpbHRlckRhdGEuZ2V0V2VhdGhlckRlc2NyaXB0aW9uKHdlYXRoZXJEYXRhKTtcbiAgICBjb25zdCB3ZWF0aGVyRGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLndlYXRoZXItZGVzY3JpcHRpb25cIlxuICAgICk7XG4gICAgd2VhdGhlckRlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IHdlYXRoZXJEZXNjcmlwdGlvbjtcbiAgfTtcbiAgY29uc3QgYWRkVGVtcGVyYXR1cmVGYWhyZW5oZWl0ID0gKHdlYXRoZXJEYXRhKSA9PiB7XG4gICAgY29uc3QgdGVtcEYgPSBmaWx0ZXJEYXRhLmdldFRlbXBlcmF0dXJlRmFocmVuaGVpdCh3ZWF0aGVyRGF0YSk7XG4gICAgY29uc3QgdGVtcEZFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50ZW1wLWZcIik7XG4gICAgdGVtcEZFbGVtZW50LnRleHRDb250ZW50ID0gYCR7dGVtcEZ9wrBGYDtcbiAgfTtcbiAgY29uc3QgYWRkVGVtcGVyYXR1cmVDZWxzaXVzID0gKHdlYXRoZXJEYXRhKSA9PiB7XG4gICAgY29uc3QgdGVtcEMgPSBmaWx0ZXJEYXRhLmdldFRlbXBlcmF0dXJlQ2Vsc2l1cyh3ZWF0aGVyRGF0YSk7XG4gICAgY29uc3QgdGVtcENFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50ZW1wLWNcIik7XG4gICAgdGVtcENFbGVtZW50LnRleHRDb250ZW50ID0gYCR7dGVtcEN9wrBDYDtcbiAgfTtcbiAgY29uc3QgYWRkQ2l0eU5hbWUgPSAod2VhdGhlckRhdGEpID0+IHtcbiAgICBjb25zdCBjaXR5TmFtZSA9IGZpbHRlckRhdGEuZ2V0Q2l0eU5hbWUod2VhdGhlckRhdGEpO1xuICAgIGNvbnN0IGNpdHlOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2l0eS1uYW1lXCIpO1xuICAgIGNpdHlOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGNpdHlOYW1lO1xuICB9O1xuICBjb25zdCByZXNldElucHV0VmFsdWUgPSAoKSA9PiB7XG4gICAgY29uc3QgY2l0eUlucHV0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2l0eVwiKTtcbiAgICBjaXR5SW5wdXRFbGVtZW50LnZhbHVlID0gXCJcIjtcbiAgfTtcbiAgY29uc3QgYWRkUGxhY2Vob2xkZXJWYWx1ZXMgPSAoKSA9PiB7XG4gICAgY29uc3Qgd2VhdGhlckljb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53ZWF0aGVyLWljb25cIik7XG4gICAgY29uc3Qgd2VhdGhlck1haW5FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53ZWF0aGVyLW1haW5cIik7XG4gICAgY29uc3Qgd2VhdGhlckRlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi53ZWF0aGVyLWRlc2NyaXB0aW9uXCJcbiAgICApO1xuICAgIGNvbnN0IHRlbXBGRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGVtcC1mXCIpO1xuICAgIGNvbnN0IHRlbXBDRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGVtcC1jXCIpO1xuICAgIGNvbnN0IGNpdHlOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2l0eS1uYW1lXCIpO1xuICAgIHdlYXRoZXJJY29uRWxlbWVudC5zcmMgPSBcIi4uL2Rpc3QvbWlja2V5LnBuZ1wiO1xuICAgIHdlYXRoZXJNYWluRWxlbWVudC50ZXh0Q29udGVudCA9IFwiVGhlIHN1biBtaWdodCBvciBtaWdodCBub3QgYmUgdmlzaWJsZVwiO1xuICAgIHdlYXRoZXJEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBcImhvcGVmdWxseSB0aGUgc2t5IGlzIHN0aWxsIGJsdWVcIjtcbiAgICB0ZW1wRkVsZW1lbnQudGV4dENvbnRlbnQgPSBcIkxhcmdlciBudW1iZXLCsEZcIjtcbiAgICB0ZW1wQ0VsZW1lbnQudGV4dENvbnRlbnQgPSBcIlNtYWxsZXIgbnVtYmVywrBDXCI7XG4gICAgY2l0eU5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gXCJEaXNuZXlsYW5kXCI7XG4gIH07XG4gIGNvbnN0IGNoYW5nZUVycm9yTWVzc2FnZSA9IChtZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZXJyb3ItbWVzc2FnZVwiKTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgfTtcbiAgY29uc3QgdG9nZ2xlU3VibWlzc2lvbkVsZW1lbnRzRW5hYmxlZCA9ICgpID0+IHtcbiAgICBjb25zdCBzdWJtaXNzaW9uRWxlbWVudHMgPSBBcnJheS5mcm9tKFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zdWJtaXNzaW9uLWVsZW1lbnRcIilcbiAgICApO1xuICAgIHN1Ym1pc3Npb25FbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBpZiAoZWxlbWVudC5kaXNhYmxlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgZWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IHRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IgPSAoKSA9PiB7XG4gICAgY29uc3QgbG9hZGluZ0luZGljYXRvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbG9hZGluZy1pbmRpY2F0b3JcIik7XG4gICAgbG9hZGluZ0luZGljYXRvci5jbGFzc0xpc3QudG9nZ2xlKFwibm90LWRpc3BsYXllZFwiKTtcbiAgfTtcbiAgY29uc3QgdG9nZ2xlTG9hZGluZ0luUHJvZ3Jlc3MgPSAoKSA9PiB7XG4gICAgdG9nZ2xlU3VibWlzc2lvbkVsZW1lbnRzRW5hYmxlZCgpO1xuICAgIHRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoKTtcbiAgfTtcbiAgY29uc3QgdXBkYXRlRGlzcGxheWVkV2VhdGhlciA9ICh3ZWF0aGVyRGF0YSkgPT4ge1xuICAgIGFkZFdlYXRoZXJJY29uKHdlYXRoZXJEYXRhKTtcbiAgICBhZGRXZWF0aGVyTWFpbih3ZWF0aGVyRGF0YSk7XG4gICAgYWRkV2VhdGhlckRlc2NyaXB0aW9uKHdlYXRoZXJEYXRhKTtcbiAgICBhZGRUZW1wZXJhdHVyZUZhaHJlbmhlaXQod2VhdGhlckRhdGEpO1xuICAgIGFkZFRlbXBlcmF0dXJlQ2Vsc2l1cyh3ZWF0aGVyRGF0YSk7XG4gICAgYWRkQ2l0eU5hbWUod2VhdGhlckRhdGEpO1xuICAgIHJlc2V0SW5wdXRWYWx1ZSgpO1xuICB9O1xuICByZXR1cm4ge1xuICAgIHVwZGF0ZURpc3BsYXllZFdlYXRoZXIsXG4gICAgYWRkUGxhY2Vob2xkZXJWYWx1ZXMsXG4gICAgY2hhbmdlRXJyb3JNZXNzYWdlLFxuICAgIHRvZ2dsZVN1Ym1pc3Npb25FbGVtZW50c0VuYWJsZWQsXG4gICAgdG9nZ2xlTG9hZGluZ0luZGljYXRvcixcbiAgICB0b2dnbGVMb2FkaW5nSW5Qcm9ncmVzcyxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IERPTU1hbmlwdWxhdGlvbiB9O1xuIiwiaW1wb3J0IHsgQVBJUmVxdWVzdCB9IGZyb20gXCIuL0FQSV9yZXF1ZXN0X21vZHVsZVwiO1xuaW1wb3J0IHsgZmlsdGVyRGF0YSB9IGZyb20gXCIuL2ZpbHRlcl9kYXRhX21vZHVsZVwiO1xuaW1wb3J0IHsgRE9NTWFuaXB1bGF0aW9uIH0gZnJvbSBcIi4vRE9NX21hbmlwdWxhdGlvbl9tb2R1bGVcIjtcblxuY29uc3QgdXNlcklucHV0ID0gKCgpID0+IHtcbiAgY29uc3Qgc3VibWl0VXNlcklucHV0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGNpdHlJbnB1dFZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjaXR5XCIpLnZhbHVlO1xuICAgIGlmIChjaXR5SW5wdXRWYWx1ZSAhPT0gXCJcIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBUElSZXF1ZXN0LmdldENpdHlXZWF0aGVyKGNpdHlJbnB1dFZhbHVlKTtcbiAgICAgICAgRE9NTWFuaXB1bGF0aW9uLnVwZGF0ZURpc3BsYXllZFdlYXRoZXIocmVzcG9uc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgICAgLy8gT3BlbldlYXRoZXJNYXAgQVBJIGNhbid0IGZpbmQgdGhlIGNpdHkgZHVlIHRvIG1pc3NwZWxsaW5nIG9yIGxhY2sgb2YgZGF0YVxuICAgICAgICAgIERPTU1hbmlwdWxhdGlvbi5jaGFuZ2VFcnJvck1lc3NhZ2UoXG4gICAgICAgICAgICBcIlVoIG9oLCBsb29rcyBsaWtlIHNvbWV0aGluZyB3ZW50IHdyb25nISBDaGVjayB5b3VyIHNwZWxsaW5nIG9yIHRyeSBhIGRpZmZlcmVudCBjaXR5IVwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5zdGF0dXMgPT09IDQyOSkge1xuICAgICAgICAgIC8vIE9wZW5XZWF0aGVyTWFwIEFQSSByYXRlIGxpbWl0XG4gICAgICAgICAgRE9NTWFuaXB1bGF0aW9uLmNoYW5nZUVycm9yTWVzc2FnZShcbiAgICAgICAgICAgIFwiV2hvYSwgc2xvdyBkb3duIHRoZXJlIHBhcnRuZXIhIFNhdmUgc29tZSB3ZWF0aGVyIGRhdGEgZm9yIHRoZSByZXN0IG9mIHVzIVwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5zdGF0dXMgPT09IDUwMCkge1xuICAgICAgICAgIERPTU1hbmlwdWxhdGlvbi5jaGFuZ2VFcnJvck1lc3NhZ2UoXG4gICAgICAgICAgICBcIlNvbWV0aGluZyBvdXQgb2Ygb3VyIGNvbnRyb2wgaXMgYnJva2VuLiBUcnkgYWdhaW4gbGF0ZXIhXCJcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoRXJyb3IoZXJyb3Iuc3RhdHVzVGV4dCkpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBET01NYW5pcHVsYXRpb24udG9nZ2xlU3VibWlzc2lvbkVsZW1lbnRzRW5hYmxlZCgpO1xuICAgIC8vIERPTU1hbmlwdWxhdGlvbi50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCk7XG4gICAgRE9NTWFuaXB1bGF0aW9uLnRvZ2dsZUxvYWRpbmdJblByb2dyZXNzKCk7XG4gIH07XG4gIGNvbnN0IHN1Ym1pdFJhbmRvbUlucHV0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGxldCByYW5kb21DaXR5TmFtZTtcbiAgICBsZXQgd2VhdGhlclJlc3BvbnNlO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjaXR5UmVzcG9uc2UgPSBhd2FpdCBBUElSZXF1ZXN0LmdldFJhbmRvbUNpdHkoKTtcbiAgICAgIHJhbmRvbUNpdHlOYW1lID0gZmlsdGVyRGF0YS5nZXRSYW5kb21DaXR5TmFtZShjaXR5UmVzcG9uc2UpO1xuICAgICAgd2VhdGhlclJlc3BvbnNlID0gYXdhaXQgQVBJUmVxdWVzdC5nZXRDaXR5V2VhdGhlcihyYW5kb21DaXR5TmFtZSk7XG4gICAgICBET01NYW5pcHVsYXRpb24udXBkYXRlRGlzcGxheWVkV2VhdGhlcih3ZWF0aGVyUmVzcG9uc2UpO1xuICAgICAgLy8gRE9NTWFuaXB1bGF0aW9uLnRvZ2dsZVN1Ym1pc3Npb25FbGVtZW50c0VuYWJsZWQoKTtcbiAgICAgIC8vIERPTU1hbmlwdWxhdGlvbi50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCk7XG4gICAgICBET01NYW5pcHVsYXRpb24udG9nZ2xlTG9hZGluZ0luUHJvZ3Jlc3MoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yLnN0YXR1cyA9PT0gNDA0ICYmIHJhbmRvbUNpdHlOYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gR2VvREIgQVBJIGVycm9yXG4gICAgICAgIERPTU1hbmlwdWxhdGlvbi5jaGFuZ2VFcnJvck1lc3NhZ2UoXG4gICAgICAgICAgXCJIbW0sIGl0IHNlZW1zIGxpa2Ugd2UncmUgcnVubmluZyBpbnRvIHNvbWUgdHJvdWJsZS4gVHJ5IGFnYWluIVwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAoZXJyb3Iuc3RhdHVzID09PSA0MDQgJiYgd2VhdGhlclJlc3BvbnNlID09PSB1bmRlZmluZWQpIHx8XG4gICAgICAgIGVycm9yLnN0YXR1cyA9PT0gNDI5XG4gICAgICApIHtcbiAgICAgICAgLy8gR2VvREIgZ2F2ZSBhIGNpdHkgdGhhdCBoYXMgbm8gZGF0YSBpbiBPcGVuV2VhdGhlck1hcCBBUElcbiAgICAgICAgc2V0VGltZW91dChzdWJtaXRSYW5kb21JbnB1dCwgMTUwMCk7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLnN0YXR1cyA9PT0gNTAwKSB7XG4gICAgICAgIERPTU1hbmlwdWxhdGlvbi5jaGFuZ2VFcnJvck1lc3NhZ2UoXG4gICAgICAgICAgXCJTb21ldGhpbmcgb3V0IG9mIG91ciBjb250cm9sIGlzIGJyb2tlbi4gVHJ5IGFnYWluIGxhdGVyIVwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmVycm9yKEVycm9yKGAke2Vycm9yLnN0YXR1c30gJHtlcnJvci5zdGF0dXNUZXh0fWApKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGFkZFVzZXJJbnB1dExpc3RlbmVyID0gKCkgPT4ge1xuICAgIGNvbnN0IHNlYXJjaEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VhcmNoLWJ1dHRvblwiKTtcbiAgICBjb25zdCBjaXR5SW5wdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjaXR5XCIpO1xuICAgIGNvbnN0IHJhbmRvbUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmFuZG9tLWJ1dHRvblwiKTtcbiAgICBzZWFyY2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIC8vIERPTU1hbmlwdWxhdGlvbi50b2dnbGVTdWJtaXNzaW9uRWxlbWVudHNFbmFibGVkKCksXG4gICAgICAvLyAgIERPTU1hbmlwdWxhdGlvbi50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCksXG4gICAgICBET01NYW5pcHVsYXRpb24udG9nZ2xlTG9hZGluZ0luUHJvZ3Jlc3MoKSwgc3VibWl0VXNlcklucHV0KCk7XG4gICAgfSk7XG4gICAgY2l0eUlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICAvLyBET01NYW5pcHVsYXRpb24udG9nZ2xlU3VibWlzc2lvbkVsZW1lbnRzRW5hYmxlZCgpLFxuICAgICAgICAvLyAgIERPTU1hbmlwdWxhdGlvbi50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCksXG4gICAgICAgIERPTU1hbmlwdWxhdGlvbi50b2dnbGVMb2FkaW5nSW5Qcm9ncmVzcygpLCBzdWJtaXRVc2VySW5wdXQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByYW5kb21CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIC8vIERPTU1hbmlwdWxhdGlvbi50b2dnbGVTdWJtaXNzaW9uRWxlbWVudHNFbmFibGVkKCksXG4gICAgICAvLyAgIERPTU1hbmlwdWxhdGlvbi50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKCksXG4gICAgICBET01NYW5pcHVsYXRpb24udG9nZ2xlTG9hZGluZ0luUHJvZ3Jlc3MoKSwgc3VibWl0UmFuZG9tSW5wdXQoKTtcbiAgICB9KTtcbiAgfTtcbiAgcmV0dXJuIHsgYWRkVXNlcklucHV0TGlzdGVuZXIgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IHVzZXJJbnB1dCB9O1xuIiwiaW1wb3J0IHsgQVBJUmVxdWVzdCB9IGZyb20gXCIuL0FQSV9yZXF1ZXN0X21vZHVsZVwiO1xuaW1wb3J0IHsgZmlsdGVyRGF0YSB9IGZyb20gXCIuL2ZpbHRlcl9kYXRhX21vZHVsZVwiO1xuaW1wb3J0IHsgdXNlcklucHV0IH0gZnJvbSBcIi4vdXNlcl9pbnB1dF9tb2R1bGVcIjtcbmltcG9ydCB7IERPTU1hbmlwdWxhdGlvbiB9IGZyb20gXCIuL0RPTV9tYW5pcHVsYXRpb25fbW9kdWxlXCI7XG5cbi8vIEFQSVJlcXVlc3QuZ2V0Q2l0eVdlYXRoZXIoXCJTYW4gRnJhbmNpc2NvXCIpXG4vLyAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuLy8gICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbi8vICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS53ZWF0aGVyWzBdLmljb24pO1xuLy8gICAgIGNvbnN0IGljb24gPSBmaWx0ZXJEYXRhLmdldFdlYXRoZXJJY29uQ29kZShyZXNwb25zZSk7XG4vLyAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbi8vICAgICBpbWcuc3JjID0gYGh0dHA6Ly9vcGVud2VhdGhlcm1hcC5vcmcvaW1nL3duLyR7aWNvbn0ucG5nYDtcbi8vICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2XCIpO1xuLy8gICAgIGRpdi5hcHBlbmRDaGlsZChpbWcpO1xuLy8gICAgIGNvbnNvbGUubG9nKGZpbHRlckRhdGEuZ2V0V2VhdGhlck1haW4ocmVzcG9uc2UpKTtcbi8vICAgICBjb25zb2xlLmxvZyhmaWx0ZXJEYXRhLmdldFdlYXRoZXJEZXNjcmlwdGlvbihyZXNwb25zZSkpO1xuLy8gICAgIGNvbnNvbGUubG9nKGZpbHRlckRhdGEuZ2V0VGVtcGVyYXR1cmUocmVzcG9uc2UpKTtcbi8vICAgICBjb25zb2xlLmxvZyhmaWx0ZXJEYXRhLmdldFRlbXBlcmF0dXJlRmFocmVuaGVpdChyZXNwb25zZSkpO1xuLy8gICAgIGNvbnNvbGUubG9nKGZpbHRlckRhdGEuZ2V0VGVtcGVyYXR1cmVDZWxzaXVzKHJlc3BvbnNlKSk7XG4vLyAgIH0pXG4vLyAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuLy8gICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbi8vICAgfSk7XG4oYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZVBhZ2UoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBUElSZXF1ZXN0LmdldENpdHlXZWF0aGVyKFwiSGVsbFwiKTtcbiAgICBET01NYW5pcHVsYXRpb24udXBkYXRlRGlzcGxheWVkV2VhdGhlcihyZXNwb25zZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgRE9NTWFuaXB1bGF0aW9uLmFkZFBsYWNlaG9sZGVyVmFsdWVzKCk7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIEVycm9yKFxuICAgICAgICBgJHtlcnJvci5zdGF0dXN9ICR7ZXJyb3Iuc3RhdHVzVGV4dH0uIElmIHlvdSBjYW4gc2VlIHRoaXMsIHRoYXQgbWVhbnMgdGhlcmUgd2FzIGFuIGlzc3VlIHdpdGggdGhlIE9wZW5XZWF0aGVyTWFwIEFQSSFgXG4gICAgICApXG4gICAgKTtcbiAgfVxufSkoKTtcbnVzZXJJbnB1dC5hZGRVc2VySW5wdXRMaXN0ZW5lcigpO1xuIl0sIm5hbWVzIjpbIkFQSVJlcXVlc3QiLCJhc3luYyIsImNpdHkiLCJyZXNwb25zZSIsImZldGNoIiwic3RhdHVzIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJyYW5kb21DaXR5SW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJtZXRob2QiLCJoZWFkZXJzIiwiZmlsdGVyRGF0YSIsImdldFRlbXBlcmF0dXJlIiwiZGF0YSIsIm1haW4iLCJ0ZW1wIiwiZ2V0VGVtcGVyYXR1cmVGYWhyZW5oZWl0IiwiZmFocmVuaGVpdCIsInJvdW5kIiwiZ2V0VGVtcGVyYXR1cmVDZWxzaXVzIiwiY2Vsc2l1cyIsImdldFdlYXRoZXJNYWluIiwid2VhdGhlciIsImdldFdlYXRoZXJEZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uIiwiZ2V0V2VhdGhlckljb25Db2RlIiwiaWNvbiIsImdldENpdHlOYW1lIiwibmFtZSIsImdldFJhbmRvbUNpdHlOYW1lIiwiRE9NTWFuaXB1bGF0aW9uIiwidG9nZ2xlU3VibWlzc2lvbkVsZW1lbnRzRW5hYmxlZCIsIkFycmF5IiwiZnJvbSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbGVtZW50IiwiZGlzYWJsZWQiLCJ0b2dnbGVMb2FkaW5nSW5kaWNhdG9yIiwicXVlcnlTZWxlY3RvciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInVwZGF0ZURpc3BsYXllZFdlYXRoZXIiLCJ3ZWF0aGVyRGF0YSIsIndlYXRoZXJJY29uIiwic3JjIiwiYWRkV2VhdGhlckljb24iLCJ3ZWF0aGVyTWFpbiIsInRleHRDb250ZW50IiwiYWRkV2VhdGhlck1haW4iLCJ3ZWF0aGVyRGVzY3JpcHRpb24iLCJhZGRXZWF0aGVyRGVzY3JpcHRpb24iLCJ0ZW1wRiIsImFkZFRlbXBlcmF0dXJlRmFocmVuaGVpdCIsInRlbXBDIiwiYWRkVGVtcGVyYXR1cmVDZWxzaXVzIiwiY2l0eU5hbWUiLCJhZGRDaXR5TmFtZSIsInZhbHVlIiwiYWRkUGxhY2Vob2xkZXJWYWx1ZXMiLCJ3ZWF0aGVySWNvbkVsZW1lbnQiLCJ3ZWF0aGVyTWFpbkVsZW1lbnQiLCJ3ZWF0aGVyRGVzY3JpcHRpb25FbGVtZW50IiwidGVtcEZFbGVtZW50IiwidGVtcENFbGVtZW50IiwiY2l0eU5hbWVFbGVtZW50IiwiY2hhbmdlRXJyb3JNZXNzYWdlIiwibWVzc2FnZSIsInRvZ2dsZUxvYWRpbmdJblByb2dyZXNzIiwidXNlcklucHV0Iiwic3VibWl0VXNlcklucHV0IiwiY2l0eUlucHV0VmFsdWUiLCJlcnJvciIsImNvbnNvbGUiLCJFcnJvciIsInN0YXR1c1RleHQiLCJzdWJtaXRSYW5kb21JbnB1dCIsInJhbmRvbUNpdHlOYW1lIiwid2VhdGhlclJlc3BvbnNlIiwiY2l0eVJlc3BvbnNlIiwidW5kZWZpbmVkIiwic2V0VGltZW91dCIsImFkZFVzZXJJbnB1dExpc3RlbmVyIiwic2VhcmNoQnV0dG9uIiwiY2l0eUlucHV0RWxlbWVudCIsInJhbmRvbUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImtleSJdLCJzb3VyY2VSb290IjoiIn0=